@page "/Inventory/ViewInventory"

@using Microsoft.AspNetCore.Authorization
@using Microsoft.EntityFrameworkCore
@using No_Kill_Inventory.Data
@inject ApplicationDbContext Context
@rendermode InteractiveServer

@*
    Locks the page behind authentication 
*@
@attribute [Authorize]

<PageTitle>Home</PageTitle>

@* 
  <AuthorizeView> locks everything in it behind authentication
  
  This section deisplay the user's username and each table of items to see the current inventory  
*@
<AuthorizeView>
    <MudText Typo="Typo.h3">Hello, @context.User.Identity.Name</MudText>
    <MudText Typo="Typo.subtitle1">The current inventory is below.</MudText>
    
    <MudTable T="FoodPallet" Items="@Context.FoodPallets" Hover="true" Breakpoint="Breakpoint.Sm">
        <HeaderContent>
            <MudTh>Item ID Number</MudTh>
            <MudTh>Animal</MudTh>
            <MudTh>Arrival Date</MudTh>
            <MudTh>Expiration Date</MudTh>
            <MudTh>Location Description</MudTh>
        </HeaderContent>
        <RowTemplate Context="pallet">
            <MudTd DataLabel="ID">@pallet.ItemID</MudTd>
            <MudTd DataLabel="Animal">@pallet.Animal</MudTd>
            <MudTd DataLabel="Arrival">@pallet.ArrivalDate.ToString("MM/dd/yyyy")</MudTd>
            <MudTd DataLabel="Expiration">@pallet.ExpirationDate.ToString("MM/dd/yyyy")</MudTd>
            <MudTd DataLabel="Location">@pallet.LocationDesc</MudTd>
        </RowTemplate>
    </MudTable>
    
</AuthorizeView>

@code {
}